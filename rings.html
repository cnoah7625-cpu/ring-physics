<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Rotating Ring Physics</title>
<style>
  body { margin: 0; background: black; overflow: hidden; }
  canvas { display: block; }
</style>
</head>
<body>
<canvas id="c"></canvas>

<script>
const canvas = document.getElementById("c");
const ctx = canvas.getContext("2d");

function resize() {
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
}
resize();
window.addEventListener("resize", resize);

const CENTER = () => ({ x: canvas.width/2, y: canvas.height/2 });

const BALL_RADIUS = 10;
const GRAVITY = 0.5;
const RESTITUTION = 0.95;
const HOLE_WIDTH = Math.PI / 5;

let ball = {
  x: CENTER().x,
  y: CENTER().y - 150,
  vx: 3,
  vy: 0
};

class Ring {
  constructor(radius, speed, phase) {
    this.radius = radius;
    this.speed = speed;
    this.angle = phase;
  }
  update() {
    this.angle += this.speed;
  }
}

let rings = [];
for (let i = 0; i < 5; i++) {
  rings.push(new Ring(
    180 + i * 80,
    0.003 + i * 0.001,
    -i * 0.4
  ));
}

function angleInRange(a, start, end) {
  a = (a + Math.PI*2) % (Math.PI*2);
  start = (start + Math.PI*2) % (Math.PI*2);
  end = (end + Math.PI*2) % (Math.PI*2);
  return start < end ? a >= start && a <= end : a >= start || a <= end;
}

function update() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);

  // Physics
  ball.vy += GRAVITY;
  ball.x += ball.vx;
  ball.y += ball.vy;

  let cx = CENTER().x;
  let cy = CENTER().y;

  for (let ring of rings) {
    let dx = ball.x - cx;
    let dy = ball.y - cy;
    let dist = Math.hypot(dx, dy);

    let angle = Math.atan2(dy, dx);
    let hStart = ring.angle - HOLE_WIDTH/2;
    let hEnd = ring.angle + HOLE_WIDTH/2;

    if (dist + BALL_RADIUS > ring.radius) {
      if (!angleInRange(angle, hStart, hEnd)) {
        let nx = dx / dist;
        let ny = dy / dist;

        let penetration = dist + BALL_RADIUS - ring.radius;
        ball.x -= nx * penetration;
        ball.y -= ny * penetration;

        let vn = ball.vx * nx + ball.vy * ny;
        if (vn > 0) {
          ball.vx -= (1 + RESTITUTION) * vn * nx;
          ball.vy -= (1 + RESTITUTION) * vn * ny;
        }
      }
    }

    ring.update();
  }

  // Draw rings
  ctx.strokeStyle = "white";
  ctx.lineWidth = 2;
  for (let ring of rings) {
    ctx.beginPath();
    ctx.arc(cx, cy, ring.radius, 0, Math.PI*2);
    ctx.stroke();
  }

  // Draw ball
  ctx.fillStyle = "red";
  ctx.beginPath();
  ctx.arc(ball.x, ball.y, BALL_RADIUS, 0, Math.PI*2);
  ctx.fill();

  requestAnimationFrame(update);
}

update();
</script>
</body>
</html>